/*
 * visualNavigation (visualNav)
 * http://wowmotty.blogspot.com/2010/07/visual-navigation.html
 *
 * Copyright (c) 2010 Rob Garrison (aka Mottie & Fudgey)
 * Dual licensed under the MIT and GPL licenses.
 *
 * Plugin base: http://starter.pixelgraphics.us/
 */

(function($){$.visualNav=function(d,e){var a=this;a.$el=$(d);a.el=d;a.$el.data("visualNav",a);a.init=function(){a.options=$.extend({},$.visualNav.defaultOptions,e);$("html,body").bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(b){if(b.which>0||b.type=="mousedown"||b.type=="mousewheel")$("html,body").stop()});a.$el.find(a.options.link).click(function(){var b=$(this).attr(a.options.targetAttr);if($(b).length){newTop=Math.min($(b).offset().top,$(document).height()-$(window).height());
$("html,body").stop().animate({scrollTop:newTop},a.options.animationTime,function(){window.location.hash=b})}return false});$(window).scroll(function(){a.findLocation()}).resize(function(){a.findLocation()})};a.findLocation=function(){var b=$(window).scrollTop();a.$el.find(a.options.link).each(function(f){var c=$($(this).attr(a.options.targetAttr));if(c.length){c=c.offset().top;if(c>b-a.options.topMargin&&(c<b+a.options.topRange||b+$(window).height()+a.options.bottomMargin>=$(document).height()))a.$el.find(a.options.selectedAppliedTo).removeClass(a.options.selectedClass).eq(f).addClass(a.options.selectedClass)}})};
a.init();a.findLocation()};$.visualNav.defaultOptions={link:"a",targetAttr:"href",selectedClass:"selected",selectedAppliedTo:"li",topRange:100,topMargin:100,bottomMargin:20,animationTime:1200};$.fn.visualNav=function(d){return this.each(function(){new $.visualNav(this,d)})};$.fn.getvisualNav=function(){this.data("visualNav")}})(jQuery);
